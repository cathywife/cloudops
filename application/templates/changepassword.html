{% extends "base.html" %}

{% block title %}用户管理 {% endblock %}

{% block content %}
<div class="container" style="background-color:#fff">
  <div class="row col-lg-12" >  
  	<h1 class="page-header">修改密码</h1>
  </div>
  <div class="row col-lg-6" id="infomationcontainer">
  	<form id="modify" class="form-horizontal" role="form">
  	  <div class="form-group">
  	  	<label for="username" class="control-label col-lg-2">用户名：</label>
  	  	<input type="text" id="username" class="form-control col-lg-4" value="{{ request.user }}"/>
  	  </div>
  	  <div class="form-group">
  	  	<label for="oldpassword" class="control-label col-lg-2">原密码：</label>
  	  	<input type="password" id="oldpassword" class="form-control col-lg-4" value=""/>  	  
  	  </div>
  	  <div class="form-group">
  	  	<label for="newpassword" class="control-label col-lg-2">新密码：</label>
  	  	<input type="password" id="newpassword" class="form-control col-lg-4" value=""/>  	  
  	  </div>  	
  	  <div class="form-group">
  	  	<label for="oldpassword" class="control-label sr col-lg-2"></label>
  	  	<input type="button" id="submit" class="btn btn-primary col-lg-2" value="提交"/>  	  
  	  </div>
  	</form>
  <!--  end row -->
  </div>
  
<!-- end container -->
<script>
$("input#submit").on('click',function(){
  var username_v = $("input#username").val();
  var oldpassword_v = $("input#oldpassword").val();
  var newpassword_v = $("input#newpassword").val();
  var showmessage_v = $("div#infomationcontainer");
  $.ajax({
  	url : "/application/changePassword/",
  	data : {
  		username : username_v,
  		oldpassword : oldpassword_v,
  		newpassword : newpassword_v  	
  	},
  	method : 'POST',
  	cache : false,
  	
  	success: function(messsage){
  		alert(message); 
  		newpassword_v.val('');
  		oldpassword_v.val(''); 	
  	},error : function(message){
  		alert(message);
  	}
  });

});
</script>
</div>
{% endblock %}
